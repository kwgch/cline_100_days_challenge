## 遺伝アルゴリズム画像選別アプリ 仕様書

---

### **1. 概要**

本アプリは、遺伝アルゴリズムを利用してランダムな図形画像を進化させ、ユーザーの好みに合わせて画像を選別・保存できるWebアプリです。UIはTinder風のスワイプ操作を採用し、スマートフォンを主な利用シーンとしつつ、PCのマウス操作にも対応します。

---

### **2. 要件**

#### **2.1 機能要件**

- ランダムな図形をランダムに配置した画像を自動生成
- 初期画像を複数生成し、キューに格納
- Tinder風UIで画像を1枚ずつ表示
- 左スワイプ（またはボタン）：好き
- 右スワイプ（またはボタン）：好きでない
- 「好き」に分類された画像は生き残り、2つの子孫画像を生成してキューに追加
- 「好きでない」に分類された画像はキューから除外
- 画像の保存機能（ユーザーが気に入った画像をローカルに保存可能）
- スマホ・PC両対応（タッチ・マウス操作）

#### **2.2 非機能要件**

- レスポンシブデザイン
- 高速な画像生成・表示
- シンプルかつ直感的なUI
- クライアントサイドのみで動作（サーバーレス）

---

### **3. 画面仕様**

#### **3.1 画面構成**

- 画像表示エリア（中央に大きく画像表示）
- 左右に「好き」「好きでない」スワイプ領域（またはボタン）
- 画像保存ボタン
- 進化世代・残り画像数の表示（オプション）

#### **3.2 UIイメージ**

- Tinder風カードUI
- スワイプ操作（タッチ・ドラッグ）
- マウス操作（PC対応）

---

### **4. データ仕様**

#### **4.1 画像データ構造**

- 各画像は「個体」として管理
- 個体情報:
  - `id`: 一意な識別子
  - `genes`: 図形や配置を決定するパラメータ配列
  - `generation`: 世代数
  - `imageData`: Canvas等で生成した画像データ

#### **4.2 遺伝的操作**

- 初期個体：完全ランダム生成
- 子孫生成：親の`genes`を元にランダム変異を加える
- 選択：ユーザーの「好き」判定による

---

### **5. ユーザー操作フロー**

1. 初期画像を表示
2. ユーザーが「好き」または「好きでない」に分類
3. 「好き」画像は2つの子孫を生成しキューへ
4. 「好きでない」画像は破棄
5. キューが尽きるまで繰り返し
6. 任意のタイミングで画像保存可能

---

## アーキテクチャ設計書

---

### **1. システム構成図**

```
[UI層 (HTML/CSS)]
       |
[ロジック層 (JavaScript)]
       |
[データ層 (メモリ上の個体管理)]
```

---

### **2. コンポーネント構成**

| コンポーネント名         | 役割                                               |
|-------------------------|----------------------------------------------------|
| UI（Tinder風カード）     | 画像表示・スワイプ/ボタン操作・保存ボタン          |
| ImageGenerator          | genesからCanvas画像を生成                          |
| GeneticAlgorithmManager | 個体生成・遺伝的操作・キュー管理                   |
| StorageManager          | 画像保存（ローカル保存、ダウンロードリンク生成等）  |
| EventHandler            | ユーザー入力（スワイプ/クリック）管理              |

---

### **3. データフロー**

1. **初期化**: GeneticAlgorithmManagerが初期個体を生成し、キューに格納
2. **表示**: キューから1枚取り出し、ImageGeneratorで画像生成→UI表示
3. **ユーザー操作**: EventHandlerがスワイプ/ボタン入力を受け取る
4. **判定**:
   - 「好き」→子孫2体生成しキューに追加
   - 「好きでない」→キューから除外
5. **保存**: StorageManagerがCanvas画像をダウンロード可能に
6. **繰り返し**: キューが空になるか、ユーザーが終了するまで続行

---

### **4. 技術選定**

- HTML5, CSS3, JavaScript（ES6+）
- Canvas API（画像生成）
- ローカルのみで完結（サーバーレス）

---

### **5. UI/UX設計方針**

- スマホファーストのレスポンシブデザイン
- スワイプ操作はTouchEvent/PointerEventで実装
- PCはドラッグ＆ドロップまたはボタンで操作
- 画像保存はCanvasの`toDataURL`を利用し、ダウンロードリンク生成

---

### **6. 拡張性**

- 図形種類や遺伝的操作パラメータの追加
- 世代管理や進化履歴の表示
- より高度な遺伝的アルゴリズム（交叉など）への拡張

---

## まとめ

本アプリは、ユーザーの好みに合わせて進化する画像生成を体験できる、Tinder風UIの遺伝アルゴリズムWebアプリです。クライアントサイドのみで動作し、スマートフォン・PC両対応の直感的な操作性を実現します。

